// @ts-nocheck
import { supabase } from"@/lib/supabase";export async function insertMigraine(e){const t=["user_id","start_time","severity"];for(const i of t)if(void 0===e[i]||null===e[i]||""===e[i])throw new Error(`Missing required field: ${i}`);const i={user_id:e.user_id,start_time:new Date(e.start_time).toISOString(),severity:Number(e.severity),symptoms:Array.isArray(e.symptoms)?e.symptoms:[],triggers:Array.isArray(e.triggers)?e.triggers:[],medication_taken:e.medication_taken??null,medication_effective:"boolean"==typeof e.medication_effective?e.medication_effective:""===e.medication_effective?null:Boolean(e.medication_effective),notes:e.notes??null,location:e.location??null,weather_conditions:e.weather_conditions??null,barometric_pressure:""===e.barometric_pressure||null==e.barometric_pressure?null:Number(e.barometric_pressure),medication_notes:e.medication_notes??null,timezone_offset_min:e.timezone_offset_min??null,created_at:(new Date).toISOString()};e.end_time&&(i.end_time=new Date(e.end_time).toISOString());const{error:r}=await supabase.from("migraine_episodes").insert(i);if(r)throw r;return{ok:!0}}