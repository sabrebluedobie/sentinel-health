// @ts-nocheck
import supabase from"@/lib/supabase";export async function insertSleep(e){const t=["user_id","date","start_time","total_sleep_hours"];for(const i of t)if(void 0===e[i]||null===e[i]||""===e[i])throw new Error(`Missing required field: ${i}`);const i={user_id:e.user_id,date:e.date,start_time:new Date(e.start_time).toISOString(),end_time:e.end_time?new Date(e.end_time).toISOString():null,total_sleep_hours:Number(e.total_sleep_hours),bedtime:e.bedtime??null,sleep_time:e.sleep_time??null,wake_time:e.wake_time??null,sleep_quality:""===e.sleep_quality?null:e.sleep_quality??null,times_woken:""===e.times_woken?null:e.times_woken??null,sleep_efficiency:""===e.sleep_efficiency?null:e.sleep_efficiency??null,notes:e.notes??null,timezone_offset_min:e.timezone_offset_min??null,created_at:e.created_at||(new Date).toISOString()},{error:l}=await supabase.from("sleep_data").insert(i);if(l)throw l;return{ok:!0}}