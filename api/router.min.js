// @ts-nocheck
import{nsSave,nsTest,nsSync}from"../server/nightscout.js";import{garminWebhook}from"../server/garmin.js";export default async function handler(t,n){const{url:e,method:r}=t,s=(e||"").replace(/^\/api\/?/,"/");try{if("/nightscout/save"===s&&"POST"===r)return nsSave(t,n);if("/nightscout/test"===s&&"POST"===r)return nsTest(t,n);if("/nightscout/sync"===s&&"POST"===r)return nsSync(t,n);if("/garmin/webhook"===s&&"GET"!==r)return garminWebhook(t,n);n.statusCode=404,n.end("Not found")}catch(t){n.statusCode=500,n.end(JSON.stringify({ok:!1,error:String(t?.message||t)}))}}